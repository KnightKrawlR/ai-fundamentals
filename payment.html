<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Fundamentals - Payment</title>
    <link rel="stylesheet" href="css/styles.css">
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
</head>
<body>
    <header>
        <div class="container">
            <a href="index.html" class="site-logo">
                <i class="fas fa-brain"></i>
                <span>AI Fundamentals</span>
            </a>
            <nav>
                <ul>
                    <li><a href="index.html#learning">Learning</a></li>
                    <li><a href="index.html#ai-tools">AI Tools</a></li>
                    <li><a href="index.html#premium">Premium</a></li>
                </ul>
            </nav>
            <button class="login-button"><i class="fas fa-user"></i><span> My Account</span></button>
        </div>
    </header>

    <section class="payment-section">
        <div class="container">
            <div class="payment-header">
                <h2>Choose Your Plan</h2>
                <p>Select the membership plan that works best for you</p>
            </div>
            
            <div class="premium-plans">
                <div class="premium-plan">
                    <h3>Basic</h3>
                    <div class="plan-price">Free</div>
                    <ul class="plan-features">
                        <li><i class="fas fa-check"></i> Access to basic flashcards</li>
                        <li><i class="fas fa-check"></i> Limited study modes</li>
                        <li><i class="fas fa-check"></i> Basic AI tools directory</li>
                        <li><i class="fas fa-check"></i> Community forum access</li>
                    </ul>
                    <a href="#" class="btn" id="basic-plan-btn">Current Plan</a>
                </div>
                
                <div class="premium-plan featured-plan">
                    <div class="featured-badge">Most Popular</div>
                    <h3>Premium</h3>
                    <div class="plan-price">$9.99<span class="period">/month</span></div>
                    <ul class="plan-features">
                        <li><i class="fas fa-check"></i> All basic features</li>
                        <li><i class="fas fa-check"></i> 500+ advanced AI flashcards</li>
                        <li><i class="fas fa-check"></i> Unlimited study sessions</li>
                        <li><i class="fas fa-check"></i> Progress tracking</li>
                        <li><i class="fas fa-check"></i> Downloadable resources</li>
                        <li><i class="fas fa-check"></i> 10% discount on learning courses</li>
                        <li><i class="fas fa-check"></i> Priority support</li>
                    </ul>
                    <a href="#" class="btn upgrade-btn" id="premium-plan-btn">Upgrade Now</a>
                </div>
                
                <div class="premium-plan">
                    <h3>Premium Plus</h3>
                    <div class="plan-price">$19.99<span class="period">/month</span></div>
                    <ul class="plan-features">
                        <li><i class="fas fa-check"></i> All premium features</li>
                        <li><i class="fas fa-check"></i> Advanced AI tools access</li>
                        <li><i class="fas fa-check"></i> Unlimited downloads</li>
                        <li><i class="fas fa-check"></i> 1-on-1 coaching session</li>
                        <li><i class="fas fa-check"></i> Exclusive webinars</li>
                        <li><i class="fas fa-check"></i> 15% discount on learning courses</li>
                        <li><i class="fas fa-check"></i> Certificate of completion</li>
                    </ul>
                    <a href="#" class="btn upgrade-btn" id="premium-plus-plan-btn">Upgrade to Plus</a>
                </div>
            </div>
            
            <div class="payment-form" id="payment-form" style="display: none;">
                <h3>Payment Information</h3>
                
                <div class="payment-methods">
                    <div class="payment-method selected" data-method="card">
                        <i class="fas fa-credit-card"></i>
                        <div>Credit Card</div>
                    </div>
                    <div class="payment-method" data-method="paypal">
                        <i class="fab fa-paypal"></i>
                        <div>PayPal</div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="card-name">Name on Card</label>
                    <input type="text" id="card-name" placeholder="John Doe">
                </div>
                
                <div class="form-group">
                    <label for="card-number">Card Number</label>
                    <input type="text" id="card-number" placeholder="1234 5678 9012 3456">
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="card-expiry">Expiration Date</label>
                        <input type="text" id="card-expiry" placeholder="MM/YY">
                    </div>
                    <div class="form-group">
                        <label for="card-cvc">CVC</label>
                        <input type="text" id="card-cvc" placeholder="123">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="billing-address">Billing Address</label>
                    <input type="text" id="billing-address" placeholder="123 Main St">
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="billing-city">City</label>
                        <input type="text" id="billing-city" placeholder="New York">
                    </div>
                    <div class="form-group">
                        <label for="billing-state">State</label>
                        <input type="text" id="billing-state" placeholder="NY">
                    </div>
                    <div class="form-group">
                        <label for="billing-zip">ZIP Code</label>
                        <input type="text" id="billing-zip" placeholder="10001">
                    </div>
                </div>
                
                <button type="button" id="submit-payment" class="btn">Complete Payment</button>
                
                <div class="secure-badge">
                    <i class="fas fa-lock"></i> Secure payment processing
                </div>
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>AI Fundamentals</h3>
                    <p>Your journey to AI mastery starts here</p>
                </div>
                <div class="footer-column">
                    <h3>Resources</h3>
                    <ul>
                        <li><a href="#">Flashcards</a></li>
                        <li><a href="#">Study Guides</a></li>
                        <li><a href="#">Video Lessons</a></li>
                        <li><a href="#">Practice Quizzes</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Company</h3>
                    <ul>
                        <li><a href="#">About Us</a></li>
                        <li><a href="#">Contact</a></li>
                        <li><a href="#">Careers</a></li>
                        <li><a href="#">Blog</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Legal</h3>
                    <ul>
                        <li><a href="#">Terms of Service</a></li>
                        <li><a href="#">Privacy Policy</a></li>
                        <li><a href="#">Cookie Policy</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 AI Fundamentals. All rights reserved.</p>
                <div class="social-links">
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-facebook"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-linkedin"></i></a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDjMIsQKMgdA6qNg7gnXDumhNOOWOD-Y00",
            authDomain: "ai-fundamentals-ad37d.firebaseapp.com",
            projectId: "ai-fundamentals-ad37d",
            storageBucket: "ai-fundamentals-ad37d.firebasestorage.app",
            messagingSenderId: "668115447112",
            appId: "1:668115447112:web:c0772e9f8c6a498737977d",
            measurementId: "G-2D5V39EQ3T"
        };
        
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        
        document.addEventListener('DOMContentLoaded', function() {
            // Check if user is logged in
            firebase.auth().onAuthStateChanged(function(user) {
                if (user) {
                    // User is signed in
                    updateUIWithUserData(user);
                } else {
                    // User is not signed in, redirect to login
                    window.location.href = 'login.html';
                }
            });
            
            // Set up payment method selection
            const paymentMethods = document.querySelectorAll('.payment-method');
            paymentMethods.forEach(method => {
                method.addEventListener('click', function() {
                    paymentMethods.forEach(m => m.classList.remove('selected'));
                    this.classList.add('selected');
                });
            });
            
            // Set up plan selection
            const basicPlanBtn = document.getElementById('basic-plan-btn');
            const premiumPlanBtn = document.getElementById('premium-plan-btn');
            const premiumPlusPlanBtn = document.getElementById('premium-plus-plan-btn');
            const paymentForm = document.getElementById('payment-form');
            
            let selectedPlan = '';
            
            if (basicPlanBtn) {
                basicPlanBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    // No payment needed for basic plan
                    updateUserPlan('Basic');
                });
            }
            
            if (premiumPlanBtn) {
                premiumPlanBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    selectedPlan = 'Premium';
                    paymentForm.style.display = 'block';
                    scrollToPaymentForm();
                });
            }
            
            if (premiumPlusPlanBtn) {
                premiumPlusPlanBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    selectedPlan = 'Premium Plus';
                    paymentForm.style.display = 'block';
                    scrollToPaymentForm();
                });
            }
            
            // Set up payment submission
            const submitPaymentBtn = document.getElementById('submit-payment');
            if (submitPaymentBtn) {
                submitPaymentBtn.addEventListener('click', function() {
                    // In a real app, this would process the payment
                    // For this demo, we'll just update the user's plan
                    updateUserPlan(selectedPlan);
                });
            }
            
            // Check URL parameters for pre-selected plan
            const urlParams = new URLSearchParams(window.location.search);
            const planParam = urlParams.get('plan');
            if (planParam === 'plus' && premiumPlusPlanBtn) {
                selectedPlan = 'Premium Plus';
                paymentForm.style.display = 'block';
                setTimeout(scrollToPaymentForm, 500);
            }
        });
        
        // Update UI with user data
        function updateUIWithUserData(user) {
            // Try to get user data from localStorage first (for demo users)
            let userData = null;
            const storedUser = localStorage.getItem('user');
            
            if (storedUser) {
                userData = JSON.parse(storedUser);
            } else if (user) {
                // Use Firebase user data
                userData = {
                    uid: user.uid,
                    name: user.displayName || 'User',
                    email: user.email,
                    plan: 'Basic' // Default plan
                };
                
                // Save to localStorage for demo purposes
                localStorage.setItem('user', JSON.stringify(userData));
            }
            
            if (userData) {
                // Update login button
                const loginButton = document.querySelector('.login-button');
                if (loginButton) {
                    loginButton.innerHTML = '<i class="fas fa-user"></i><span> My Account</span>';
                    loginButton.addEventListener('click', function() {
                        window.location.href = 'account.html';
                    });
                }
                
                // Update plan buttons based on current plan
                const basicPlanBtn = document.getElementById('basic-plan-btn');
                const premiumPlanBtn = document.getElementById('premium-plan-btn');
                const premiumPlusPlanBtn = document.getElementById('premium-plus-plan-btn');
                
                if (userData.plan === 'Basic' || !userData.plan) {
                    if (basicPlanBtn) basicPlanBtn.textContent = 'Current Plan';
                    if (premiumPlanBtn) premiumPlanBtn.textContent = 'Upgrade Now';
                    if (premiumPlusPlanBtn) premiumPlusPlanBtn.textContent = 'Upgrade to Plus';
                } else if (userData.plan === 'Premium' || userData.plan === 'premium') {
                    if (basicPlanBtn) basicPlanBtn.textContent = 'Downgrade';
                    if (premiumPlanBtn) premiumPlanBtn.textContent = 'Current Plan';
                    if (premiumPlusPlanBtn) premiumPlusPlanBtn.textContent = 'Upgrade to Plus';
                } else if (userData.plan === 'Premium Plus') {
                    if (basicPlanBtn) basicPlanBtn.textContent = 'Downgrade';
                    if (premiumPlanBtn) premiumPlanBtn.textContent = 'Downgrade';
                    if (premiumPlusPlanBtn) premiumPlusPlanBtn.textContent = 'Current Plan';
                }
            }
        }
        
        // Update user's plan
        function updateUserPlan(planName) {
            // Get current user data
            const userString = localStorage.getItem('user');
            if (userString) {
                const userData = JSON.parse(userString);
                
                // Update plan
                userData.plan = planName;
                
                // Save updated user data
                localStorage.setItem('user', JSON.stringify(userData));
                
                // Show success message
                alert(`Your plan has been updated to ${planName}!`);
                
                // Redirect to account page
                window.location.href = 'account.html';
            }
        }
        
        // Scroll to payment form
        function scrollToPaymentForm() {
            const paymentForm = document.getElementById('payment-form');
            if (paymentForm) {
                paymentForm.scrollIntoView({ behavior: 'smooth' });
            }
        }
    </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</body>
</html>
